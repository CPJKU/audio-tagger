
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Consumer &#8212; Audio-Tagger  documentation</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Webserver" href="webserver.html" />
    <link rel="prev" title="Backend" href="backend.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="module-server.consumer">
<span id="consumer"></span><h1>Consumer<a class="headerlink" href="#module-server.consumer" title="Permalink to this headline">¶</a></h1>
<p>This package includes various types of consumers
which take audio chunks as input an process them into
different representations.</p>
<div class="section" id="module-server.consumer.predictors.example_predictor.dummy_predictor">
<span id="example-predictor"></span><h2>Example Predictor<a class="headerlink" href="#module-server.consumer.predictors.example_predictor.dummy_predictor" title="Permalink to this headline">¶</a></h2>
<p>Dummy predictor which serves as a template implementation
for a new predictor. At the end of each prediction iteration
it is essential to call the method
<code class="docutils literal notranslate"><span class="pre">onNewPredictionCalculated(probs)</span></code> of <code class="docutils literal notranslate"><span class="pre">AudioTaggerManager</span></code>
and send it the new predictions.</p>
<dl class="class">
<dt id="server.consumer.predictors.example_predictor.dummy_predictor.DummyPredictor">
<em class="property">class </em><code class="descclassname">server.consumer.predictors.example_predictor.dummy_predictor.</code><code class="descname">DummyPredictor</code><a class="headerlink" href="#server.consumer.predictors.example_predictor.dummy_predictor.DummyPredictor" title="Permalink to this definition">¶</a></dt>
<dd><p>Implementation of a PredictorContract. This class
serves as a dummy predictor and shows the basic
structure of a predictor.</p>
<dl class="attribute">
<dt id="server.consumer.predictors.example_predictor.dummy_predictor.DummyPredictor.predThread">
<code class="descname">predThread</code><a class="headerlink" href="#server.consumer.predictors.example_predictor.dummy_predictor.DummyPredictor.predThread" title="Permalink to this definition">¶</a></dt>
<dd><p>reference pointing to the prediction thread</p>
</dd></dl>

<dl class="method">
<dt id="server.consumer.predictors.example_predictor.dummy_predictor.DummyPredictor.start">
<code class="descname">start</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#server.consumer.predictors.example_predictor.dummy_predictor.DummyPredictor.start" title="Permalink to this definition">¶</a></dt>
<dd><p>starts all necessary sub tasks of this predictor.</p>
</dd></dl>

<dl class="method">
<dt id="server.consumer.predictors.example_predictor.dummy_predictor.DummyPredictor.stop">
<code class="descname">stop</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#server.consumer.predictors.example_predictor.dummy_predictor.DummyPredictor.stop" title="Permalink to this definition">¶</a></dt>
<dd><p>stops all necessary sub tasks of this predictor.</p>
</dd></dl>

<dl class="method">
<dt id="server.consumer.predictors.example_predictor.dummy_predictor.DummyPredictor.predict">
<code class="descname">predict</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#server.consumer.predictors.example_predictor.dummy_predictor.DummyPredictor.predict" title="Permalink to this definition">¶</a></dt>
<dd><p>dummy prediction returning random class probabilities.</p>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">predict</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd><p>dummy predictor</p>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">start</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd><p>Start all sub tasks necessary for continuous prediction.</p>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">stop</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd><p>Stops all sub tasks</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="server.consumer.predictors.example_predictor.dummy_predictor.PredictionThread">
<em class="property">class </em><code class="descclassname">server.consumer.predictors.example_predictor.dummy_predictor.</code><code class="descname">PredictionThread</code><span class="sig-paren">(</span><em>provider</em>, <em>name='PredictionThread'</em><span class="sig-paren">)</span><a class="headerlink" href="#server.consumer.predictors.example_predictor.dummy_predictor.PredictionThread" title="Permalink to this definition">¶</a></dt>
<dd><p>Thread for periodically computing new class predictions
based on the currently available sliding window.</p>
<dl class="attribute">
<dt id="server.consumer.predictors.example_predictor.dummy_predictor.PredictionThread.provider">
<code class="descname">provider</code><a class="headerlink" href="#server.consumer.predictors.example_predictor.dummy_predictor.PredictionThread.provider" title="Permalink to this definition">¶</a></dt>
<dd><p>reference to the predictor the thread belongs to</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>PredictorContract</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="server.consumer.predictors.example_predictor.dummy_predictor.PredictionThread._stopevent">
<code class="descname">_stopevent</code><a class="headerlink" href="#server.consumer.predictors.example_predictor.dummy_predictor.PredictionThread._stopevent" title="Permalink to this definition">¶</a></dt>
<dd><p>indicator for stopping a thread loop</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>threading.Event</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="server.consumer.predictors.example_predictor.dummy_predictor.PredictionThread.run">
<code class="descname">run</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#server.consumer.predictors.example_predictor.dummy_predictor.PredictionThread.run" title="Permalink to this definition">¶</a></dt>
<dd><p>method triggered when start() method is called.</p>
</dd></dl>

<dl class="method">
<dt id="server.consumer.predictors.example_predictor.dummy_predictor.PredictionThread.join">
<code class="descname">join</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#server.consumer.predictors.example_predictor.dummy_predictor.PredictionThread.join" title="Permalink to this definition">¶</a></dt>
<dd><p>sends stop signal to thread.</p>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">join</code><span class="sig-paren">(</span><em>timeout=None</em><span class="sig-paren">)</span></dt>
<dd><p>Stops the thread.</p>
<p>This method tries to stop a thread. When timeout has passed
and the thread could not be stopped yet, the program continues.
If timeout is set to None, join blocks until the thread is stopped.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>timeout</strong> (<em>float</em>) – a timeout value in seconds</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">run</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd><p>Periodically computes new predictions based on
the currently available sliding window. After each iteration
the method informs <code class="docutils literal notranslate"><span class="pre">AudioTaggerManager</span></code> about the new
predictions.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-server.consumer.predictors.dcase_predictor_provider.dcase_predictor_provider">
<span id="dcase-predictor"></span><h2>DCASE Predictor<a class="headerlink" href="#module-server.consumer.predictors.dcase_predictor_provider.dcase_predictor_provider" title="Permalink to this headline">¶</a></h2>
<p>This module contains a prediction consumer and therefore
inherits from <code class="docutils literal notranslate"><span class="pre">PredictorContract</span></code>. It further defines two Thread
classes <code class="docutils literal notranslate"><span class="pre">SlidingWindowThread</span></code> and <code class="docutils literal notranslate"><span class="pre">PredictionThread</span></code>.</p>
<p>It takes
audio chunks from the shared memory of <code class="docutils literal notranslate"><span class="pre">AudioTaggerManager</span></code> based
on the current global timestamp <code class="docutils literal notranslate"><span class="pre">tGroundTruth</span></code> and calculates a prediction
based on a spectrogram computation from the past 256 audio chunks.
Due to performance issues, the computations are cached and only the
audio chunk indicated by <code class="docutils literal notranslate"><span class="pre">tGroundTruth</span></code> is computed newly by a
separate Thread (SlidingWindowThread). Finally, this produces a cached spectrogram as a
sliding window over time.
The second Thread (PredictionThread) periodically access the current sliding window,
computes a class prediction with a pre-trained convolutional neural network based
on the current spectrogram as input. Finally, <code class="docutils literal notranslate"><span class="pre">AudioTaggerManager</span></code> is informed
about the new predictions. Therefore it is essential to call the method
<code class="docutils literal notranslate"><span class="pre">onNewPredictionCalculated(probs)</span></code> of <code class="docutils literal notranslate"><span class="pre">AudioTaggerManager</span></code> and send it the
new predictions.</p>
<dl class="class">
<dt id="server.consumer.predictors.dcase_predictor_provider.dcase_predictor_provider.DcasePredictorProvider">
<em class="property">class </em><code class="descclassname">server.consumer.predictors.dcase_predictor_provider.dcase_predictor_provider.</code><code class="descname">DcasePredictorProvider</code><a class="headerlink" href="#server.consumer.predictors.dcase_predictor_provider.dcase_predictor_provider.DcasePredictorProvider" title="Permalink to this definition">¶</a></dt>
<dd><p>Implementation of a PredictorContract. This class
makes predictions where spectrograms are considered
as inputs and a convolutional neural network produces
class probabilities.</p>
<dl class="attribute">
<dt id="server.consumer.predictors.dcase_predictor_provider.dcase_predictor_provider.DcasePredictorProvider.sig_proc">
<code class="descname">sig_proc</code><a class="headerlink" href="#server.consumer.predictors.dcase_predictor_provider.dcase_predictor_provider.DcasePredictorProvider.sig_proc" title="Permalink to this definition">¶</a></dt>
<dd><p>processor which outputs sampled audio signals</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>madmom.Processor</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="server.consumer.predictors.dcase_predictor_provider.dcase_predictor_provider.DcasePredictorProvider.fsig_proc">
<code class="descname">fsig_proc</code><a class="headerlink" href="#server.consumer.predictors.dcase_predictor_provider.dcase_predictor_provider.DcasePredictorProvider.fsig_proc" title="Permalink to this definition">¶</a></dt>
<dd><p>processor which produces overlapping frames based on sampled signals</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>madmom.Processor</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="server.consumer.predictors.dcase_predictor_provider.dcase_predictor_provider.DcasePredictorProvider.spec_proc">
<code class="descname">spec_proc</code><a class="headerlink" href="#server.consumer.predictors.dcase_predictor_provider.dcase_predictor_provider.DcasePredictorProvider.spec_proc" title="Permalink to this definition">¶</a></dt>
<dd><p>processor which computes a spectrogram with stft based on framed signals</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>madmom.Processor</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="server.consumer.predictors.dcase_predictor_provider.dcase_predictor_provider.DcasePredictorProvider.filt_proc">
<code class="descname">filt_proc</code><a class="headerlink" href="#server.consumer.predictors.dcase_predictor_provider.dcase_predictor_provider.DcasePredictorProvider.filt_proc" title="Permalink to this definition">¶</a></dt>
<dd><p>processor which filters and scales a spectrogram</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>madmom.Processor</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="server.consumer.predictors.dcase_predictor_provider.dcase_predictor_provider.DcasePredictorProvider.processorPipeline">
<code class="descname">processorPipeline</code><a class="headerlink" href="#server.consumer.predictors.dcase_predictor_provider.dcase_predictor_provider.DcasePredictorProvider.processorPipeline" title="Permalink to this definition">¶</a></dt>
<dd><p>creates pipeline of elements of type madmom.Processor</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>SequentialProcessor</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="server.consumer.predictors.dcase_predictor_provider.dcase_predictor_provider.DcasePredictorProvider.classes">
<code class="descname">classes</code><a class="headerlink" href="#server.consumer.predictors.dcase_predictor_provider.dcase_predictor_provider.DcasePredictorProvider.classes" title="Permalink to this definition">¶</a></dt>
<dd><p>class list</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>list of str</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="server.consumer.predictors.dcase_predictor_provider.dcase_predictor_provider.DcasePredictorProvider.device">
<code class="descname">device</code><a class="headerlink" href="#server.consumer.predictors.dcase_predictor_provider.dcase_predictor_provider.DcasePredictorProvider.device" title="Permalink to this definition">¶</a></dt>
<dd><p>indicates the processor to be used for neural network prediction</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="server.consumer.predictors.dcase_predictor_provider.dcase_predictor_provider.DcasePredictorProvider.prediction_model">
<code class="descname">prediction_model</code><a class="headerlink" href="#server.consumer.predictors.dcase_predictor_provider.dcase_predictor_provider.DcasePredictorProvider.prediction_model" title="Permalink to this definition">¶</a></dt>
<dd><p>holds a reference to the CNN architecture</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>baseline_net.Net</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="server.consumer.predictors.dcase_predictor_provider.dcase_predictor_provider.DcasePredictorProvider.sliding_window">
<code class="descname">sliding_window</code><a class="headerlink" href="#server.consumer.predictors.dcase_predictor_provider.dcase_predictor_provider.DcasePredictorProvider.sliding_window" title="Permalink to this definition">¶</a></dt>
<dd><p>cache for previously calculated spectrograms</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>2d numpy array</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="server.consumer.predictors.dcase_predictor_provider.dcase_predictor_provider.DcasePredictorProvider.lastProceededGroundTruth">
<code class="descname">lastProceededGroundTruth</code><a class="headerlink" href="#server.consumer.predictors.dcase_predictor_provider.dcase_predictor_provider.DcasePredictorProvider.lastProceededGroundTruth" title="Permalink to this definition">¶</a></dt>
<dd><p>variable to keep track of the last processed audio chunk</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="server.consumer.predictors.dcase_predictor_provider.dcase_predictor_provider.DcasePredictorProvider.slidingWindowThread">
<code class="descname">slidingWindowThread</code><a class="headerlink" href="#server.consumer.predictors.dcase_predictor_provider.dcase_predictor_provider.DcasePredictorProvider.slidingWindowThread" title="Permalink to this definition">¶</a></dt>
<dd><p>reference pointing to the sliding window thread</p>
</dd></dl>

<dl class="attribute">
<dt id="server.consumer.predictors.dcase_predictor_provider.dcase_predictor_provider.DcasePredictorProvider.predictionThread">
<code class="descname">predictionThread</code><a class="headerlink" href="#server.consumer.predictors.dcase_predictor_provider.dcase_predictor_provider.DcasePredictorProvider.predictionThread" title="Permalink to this definition">¶</a></dt>
<dd><p>reference pointing to the prediction thread</p>
</dd></dl>

<dl class="method">
<dt id="server.consumer.predictors.dcase_predictor_provider.dcase_predictor_provider.DcasePredictorProvider.start">
<code class="descname">start</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#server.consumer.predictors.dcase_predictor_provider.dcase_predictor_provider.DcasePredictorProvider.start" title="Permalink to this definition">¶</a></dt>
<dd><p>starts all necessary sub tasks of this predictor.</p>
</dd></dl>

<dl class="method">
<dt id="server.consumer.predictors.dcase_predictor_provider.dcase_predictor_provider.DcasePredictorProvider.stop">
<code class="descname">stop</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#server.consumer.predictors.dcase_predictor_provider.dcase_predictor_provider.DcasePredictorProvider.stop" title="Permalink to this definition">¶</a></dt>
<dd><p>stops all necessary sub tasks of this predictor.</p>
</dd></dl>

<dl class="method">
<dt id="server.consumer.predictors.dcase_predictor_provider.dcase_predictor_provider.DcasePredictorProvider.computeSpectrogram">
<code class="descname">computeSpectrogram</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#server.consumer.predictors.dcase_predictor_provider.dcase_predictor_provider.DcasePredictorProvider.computeSpectrogram" title="Permalink to this definition">¶</a></dt>
<dd><p>compute a spectrogram based on the most current audio chunk.</p>
</dd></dl>

<dl class="method">
<dt id="server.consumer.predictors.dcase_predictor_provider.dcase_predictor_provider.DcasePredictorProvider.predict">
<code class="descname">predict</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#server.consumer.predictors.dcase_predictor_provider.dcase_predictor_provider.DcasePredictorProvider.predict" title="Permalink to this definition">¶</a></dt>
<dd><p>CNN prediction based on current spectrogram input.</p>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">computeSpectrogram</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd><p>This methods first access the global time variable <code class="docutils literal notranslate"><span class="pre">tGroundTruth</span></code>
and reads audio chunk the time variable points to. Afterwards, the defined
madmom pipeline is processed to get the spectrogram representation of the
single chunk. Finally, the sliding window is updated with the new audio chunk.</p>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">predict</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd><p>This method executes the actual prediction task based on the
currently available slinding window. The sliding window is sent
into the CNN model and the correpsonding softmax output for the
respecive classes are returned</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><strong>probs</strong> – an array of number of classes entries where each entry consists of
the class name, its predicted probability and a position index.
Example:
<code class="docutils literal notranslate"><span class="pre">[[&quot;class1&quot;,</span> <span class="pre">0.0006955251446925104,</span> <span class="pre">0],</span> <span class="pre">[&quot;class2&quot;,</span> <span class="pre">0.0032770668622106314,</span> <span class="pre">1],</span> <span class="pre">...]</span></code></p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>array of list objects</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">start</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd><p>Start all sub tasks necessary for continuous prediction.</p>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">stop</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd><p>Stops all sub tasks</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="server.consumer.predictors.dcase_predictor_provider.dcase_predictor_provider.PredictionThread">
<em class="property">class </em><code class="descclassname">server.consumer.predictors.dcase_predictor_provider.dcase_predictor_provider.</code><code class="descname">PredictionThread</code><span class="sig-paren">(</span><em>provider</em>, <em>name='PredictionThread'</em><span class="sig-paren">)</span><a class="headerlink" href="#server.consumer.predictors.dcase_predictor_provider.dcase_predictor_provider.PredictionThread" title="Permalink to this definition">¶</a></dt>
<dd><p>Thread for periodically computing new class predictions
based on the currently available sliding window.</p>
<dl class="attribute">
<dt id="server.consumer.predictors.dcase_predictor_provider.dcase_predictor_provider.PredictionThread.provider">
<code class="descname">provider</code><a class="headerlink" href="#server.consumer.predictors.dcase_predictor_provider.dcase_predictor_provider.PredictionThread.provider" title="Permalink to this definition">¶</a></dt>
<dd><p>reference to the predictor the thread belongs to</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>PredictorContract</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="server.consumer.predictors.dcase_predictor_provider.dcase_predictor_provider.PredictionThread._stopevent">
<code class="descname">_stopevent</code><a class="headerlink" href="#server.consumer.predictors.dcase_predictor_provider.dcase_predictor_provider.PredictionThread._stopevent" title="Permalink to this definition">¶</a></dt>
<dd><p>indicator for stopping a thread loop</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>threading.Event</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="server.consumer.predictors.dcase_predictor_provider.dcase_predictor_provider.PredictionThread.run">
<code class="descname">run</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#server.consumer.predictors.dcase_predictor_provider.dcase_predictor_provider.PredictionThread.run" title="Permalink to this definition">¶</a></dt>
<dd><p>method triggered when start() method is called.</p>
</dd></dl>

<dl class="method">
<dt id="server.consumer.predictors.dcase_predictor_provider.dcase_predictor_provider.PredictionThread.join">
<code class="descname">join</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#server.consumer.predictors.dcase_predictor_provider.dcase_predictor_provider.PredictionThread.join" title="Permalink to this definition">¶</a></dt>
<dd><p>sends stop signal to thread.</p>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">join</code><span class="sig-paren">(</span><em>timeout=None</em><span class="sig-paren">)</span></dt>
<dd><p>Stops the thread.</p>
<p>This method tries to stop a thread. When timeout has passed
and the thread could not be stopped yet, the program continues.
If timeout is set to None, join blocks until the thread is stopped.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>timeout</strong> (<em>float</em>) – a timeout value in seconds</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">run</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd><p>Periodically computes new predictions based on
the currently available sliding window. After each iteration
the method informs <code class="docutils literal notranslate"><span class="pre">AudioTaggerManager</span></code> about the new
predictions.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="server.consumer.predictors.dcase_predictor_provider.dcase_predictor_provider.SlidingWindowThread">
<em class="property">class </em><code class="descclassname">server.consumer.predictors.dcase_predictor_provider.dcase_predictor_provider.</code><code class="descname">SlidingWindowThread</code><span class="sig-paren">(</span><em>provider</em>, <em>name='SlidingWindowThread'</em><span class="sig-paren">)</span><a class="headerlink" href="#server.consumer.predictors.dcase_predictor_provider.dcase_predictor_provider.SlidingWindowThread" title="Permalink to this definition">¶</a></dt>
<dd><p>Thread for processing new audio chunks, computes its
spectrogram representation and appends it to the cached
sliding window.</p>
<dl class="attribute">
<dt id="server.consumer.predictors.dcase_predictor_provider.dcase_predictor_provider.SlidingWindowThread.provider">
<code class="descname">provider</code><a class="headerlink" href="#server.consumer.predictors.dcase_predictor_provider.dcase_predictor_provider.SlidingWindowThread.provider" title="Permalink to this definition">¶</a></dt>
<dd><p>reference to the predictor the thread belongs to</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>PredictorContract</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="server.consumer.predictors.dcase_predictor_provider.dcase_predictor_provider.SlidingWindowThread._stopevent">
<code class="descname">_stopevent</code><a class="headerlink" href="#server.consumer.predictors.dcase_predictor_provider.dcase_predictor_provider.SlidingWindowThread._stopevent" title="Permalink to this definition">¶</a></dt>
<dd><p>indicator for stopping a thread loop</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>threading.Event</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="server.consumer.predictors.dcase_predictor_provider.dcase_predictor_provider.SlidingWindowThread.run">
<code class="descname">run</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#server.consumer.predictors.dcase_predictor_provider.dcase_predictor_provider.SlidingWindowThread.run" title="Permalink to this definition">¶</a></dt>
<dd><p>method triggered when start() method is called.</p>
</dd></dl>

<dl class="method">
<dt id="server.consumer.predictors.dcase_predictor_provider.dcase_predictor_provider.SlidingWindowThread.join">
<code class="descname">join</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#server.consumer.predictors.dcase_predictor_provider.dcase_predictor_provider.SlidingWindowThread.join" title="Permalink to this definition">¶</a></dt>
<dd><p>sends stop signal to thread.</p>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">join</code><span class="sig-paren">(</span><em>timeout=None</em><span class="sig-paren">)</span></dt>
<dd><p>Stops the thread.</p>
<p>This method tries to stop a thread. When timeout has passed
and the thread could not be stopped yet, the program continues.
If timeout is set to None, join blocks until the thread is stopped.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>timeout</strong> (<em>float</em>) – a timeout value in seconds</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">run</code><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd><p>Periodically computes sliding windows</p>
</dd></dl>

</dd></dl>

</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">Audio-Tagger</a></h1>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="backend.html">Backend</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
  <li><a href="backend.html">Backend</a><ul>
      <li>Previous: <a href="backend.html" title="previous chapter">Backend</a></li>
      <li>Next: <a href="webserver.html" title="next chapter">Webserver</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2019, Alexander Moser, Florian Henkel, Stefan Balke.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 2.0.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/consumer.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>